<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>DASHBOARD - Mercoflux</title>
        <link rel="stylesheet" href="css/style.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="js/heatmap.js"></script>
    </head>
    <body id="dashboard">
        <div class="header">
            <div class="container">
                <a href="index.html">
                    <img src="images/LogoF.png">
                </a>
                <ul class="navbar">
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="projeto.html">PROJETO</a></li>
                    <li><a href="simulador.html">SIMULADOR</a></li>
                    <li class="destaque"><a href="dashboard.html">DASHBOARD</a></li>
                    <li><a href="perfil.html">MEU PERFIL</a></li>
                </ul>
            </div>
        </div>
        <div class="dashboard">
            <div class="dashboard-container">
                <h1 id="nomeMercado">Dashboard - Mercado </h1>
            </div>
            <div class="dashboard-container kpis">
                <div class="caixa">
                    <p>Quantidade de corredores</p>
                    <span id="kpiTotalCorredores">0</span>
                </div>
                <div class="caixa">
                    <p>Corredor mais popular</p>
                    <span id="kpiMaisPopular">13</span>
                </div>
                <div class="caixa">
                    <p>Corredor menos popular</p>
                    <span id="kpiMenosPopular">12</span>
                </div>
                <div class="caixa">
                    <p>Fluxo de pessoas na semana</p>
                    <span id="kpiFluxo">Bom</span>
                </div>
            </div>
            <div class="graficos">
                <!-- Gráfico do dia atual atualizando em tempo real com alertas! -->
                <!-- Aqui aparece todos os corredores -->
                <div class="dashboard-container grafico">
                    <div class="dashboard-header">
                        <div class="titulo">
                            <p>Fluxo hoje</p>
                            <div class="parametros">
                                <div class="caixa">
                                    <div class="cor" style="background: #6FA8DC"></div>
                                    <p>Baixo</p>
                                </div>
                                <div class="caixa">
                                    <div class="cor" style="background: #FFD966"></div>
                                    <p>Médio</p>
                                </div>
                                <div class="caixa">
                                    <div class="cor" style="background: #83EF83"></div>
                                    <p>Bom</p>
                                </div>
                                <div class="caixa">
                                    <div class="cor" style="background: #E06666"></div>
                                    <p>Alto</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <canvas id="graficoDiaAtual"></canvas>
                </div>
                <!-- Gráfico da quantidade de pessoas/tempo aproximado que cada cliente passa no corredor, podendo comparar dois, máximo 7 dias-->
                <div class="container-flex">
                    <div class="dashboard-container grafico w50">
                        <div class="dashboard-header">
                            <div class="titulo">
                                <p id="tituloGrafico">Fluxo de pessoas por corredor</p>
                                <div class="caixa">
                                    <span style="color: black; font-size: 1.3rem;">Mostrar por:</span>
                                    <select id="tempoPessoasCorredor">
                                        <option value="dia">Dia</option>
                                        <option value="semana">Semana</option>
                                        <option value="mes">Mês</option>
                                    </select>
                                </div>
                            </div>
                            <div class="parametros">
                                <div class="caixa">
                                    <p>Início:</p>
                                    <input type="date" id="inicio" value="2022-03-22">
                                </div>
                                <div class="caixa">
                                    <p>Fim:</p>
                                    <input type="date" id="fim" value="2022-03-28">
                                </div>
                                <div class="caixa">
                                    <p>Corredores:</p>
                                    <input type="text" id="corredor1Tempo" placeholder="04">
                                    <span>|</span>
                                    <input type="text" id="corredor2Tempo" placeholder="09">
                                </div>
                            </div>
                        </div>
                        <canvas id="graficoQuantidade"></canvas>
                    </div>

                    <div class="dashboard-container grafico w50">
                        <div class="dashboard-header">
                            <div class="titulo">
                                <p>Histórico de mudanças</p>
                            </div>
                            <table>
                                <tr>
                                    <th>Data</th>
                                    <th>Localização</th>
                                    <th>Mudança</th>
                                </tr>
                                <tr>
                                    <td>24/03/2004</td>
                                    <td>Corredor 1</td>
                                    <td>Foi colocado uma barraca de amostra de suco del valle.</td>
                                </tr>
                                <tr>
                                    <td>24/03/2004</td>
                                    <td>Corredor 1</td>
                                    <td>Foi colocado uma barraca de amostra de suco del valle.</td>
                                </tr>
                                <tr>
                                    <td>24/03/2004</td>
                                    <td>Corredor 1</td>
                                    <td>Foi colocado uma barraca de amostra de suco del valle.</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="dashboard-container grafico">
                    <div class="dashboard-header">
                        <div class="titulo">
                            <p>Mapa de calor</p>
                        </div>
                        <div class="heatmap"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="alinhar">
                <div class="conteudo">
                    <div class="informacoes">
                        <h2>Institucional</h2>
                        <ul>
                            <li><a href="projeto.html" class="footera">Projeto</a></li>
                            <li><a href="simulador.html" class="footera">Simulador finaceiro</a></li>
                        </ul>
                    </div>
                    <div class="contato">
                        <h2>Contato</h2>
                        <ul>
                            <li>mercoflux@gmail.com</li>
                            <li>3972-3548</li>
                            <li>2521-7316</li>
                        </ul>
                    </div>
                    <div class="conta">
                        <h2>Conta</h2>
                        <ul>
                            <li><a href="login.html" class="footera">Login</a></li>
                            <li><a href="cadastro.html" class="footera">Cadastro</a></li>
                        </ul>
                    </div>
                </div>
                <p>Todos os resultados técnicos e criativos são resultado do esforço do Grupo 7&copy; de CCO</p>
            </div>
        </div>
    </body>
</html>

<script>
    // Quantidade de pessoas x Dias
    const dias = ["22/03", "23/03", "24/03", "25/03", "26/03", "27/03", "28/03"];

    const dataQtdPessoas = {
        labels: dias,
        datasets: [
            {
                label: "Fluxo no corredor 04",
                backgroundColor: "blue",
                borderColor: "blue",
                data: [30, 338, 308, 486, 353, 298, 385]
            },
            {
                label: "Fluxo no corredor 09",
                backgroundColor: "red",
                borderColor: "red",
                data: [432, 458, 157, 3, 5, 387, 498]
            }
        ]
    };
    
    const configQtdPessoas = {
        type: "line",
        data: dataQtdPessoas,
        option: {}
    };

    const contextoQtdPessoas = document.getElementById("graficoQuantidade").getContext("2d");

    contextoQtdPessoas.canvas.height = 80;

    const qtdPessoas = new Chart(contextoQtdPessoas, configQtdPessoas);
    
    function mostrarQtdPessoas(){
        graficoTempo.style.display = "none";
        graficoQuantidade.style.display = "block";

        tituloGrafico.innerHTML = "Fluxo de pessoas por corredor";
        
        selecionado.setAttribute("id", "btnTempoPessoas");
        btnQtdPessoas.setAttribute("id", "selecionado");
    }

    // Mapa de calor
    var heatmapInstance = h337.create({
        container: document.querySelector('.heatmap')
    });

    // now generate some random data
    var points = [];
    var max = 80;

    points = [
        {
            x: 150,
            y: 50,
            value: 50
        },
        {
            x: 180,
            y: 50,
            value: 50
        },
    ]

    // heatmap data format
    var data = {
        max: max,
        data: points
    };

    heatmapInstance.setData(data);
</script>

<script src="js/dashboard.js"></script>